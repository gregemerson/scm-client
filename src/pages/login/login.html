
<ion-header>
  <ion-navbar>
    <ion-title>Log in/Sign up</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-card>
  <ion-card-header fancy-text>Welcome to Stick Control Metronome!</ion-card-header>
  <ion-card-content>
    <ion-list [hidden]="invisibilityMap['menu']">
      <ion-item>
        <button ion-button (click)="makeVisible('logIn')" >Log In</button>
        <button ion-button (click)="makeVisible('createAccount')">Create Account</button>
        <button ion-button (click)="loginGuest()">Guest Log In</button>
      </ion-item>
    </ion-list>
    <ion-list [hidden]="invisibilityMap['logIn']">
      <ion-item>
        <ion-input [(ngModel)]="email" type="email" value="" placeholder="Email"></ion-input>
      </ion-item>
      <ion-item>
        <ion-input [(ngModel)]="password"  type="password" value="" placeholder="Password"></ion-input>
      </ion-item>
      <ion-item>
        <button ion-button (click)="logIn()" color="primary"><ion-icon name="checkmark-circle"></ion-icon></button>
        <button ion-button (click)="makeVisible('menu')" color="danger"><ion-icon name="close-circle"></ion-icon></button>
      </ion-item>
    </ion-list>
    <form [formGroup]="accountGroup" [hidden]="invisibilityMap['createAccount']">

      <ion-item>  
        <ion-input formControlName="newUsername" type="text" placeholder="User Name"></ion-input>
      </ion-item>
      <ion-item class="error-box" [hidden]="!(newUsernameCtrl.hasError('error') && newUsernameCtrl.touched)">{{ newUsernameCtrl.errors?.error }}</ion-item>

      <ion-item>
        <ion-input formControlName="newEmail" type="email" placeholder="Email"></ion-input>
      </ion-item>
      <ion-item class="error-box" [hidden]="!(newEmailCtrl.hasError('error') && newEmailCtrl.touched)">{{ newEmailCtrl.errors?.error }}</ion-item>
      
      <ion-item>
        <ion-input formControlName="newPassword1" type="password" placeholder="Password"></ion-input>
      </ion-item>
      <ion-item class="error-box" [hidden]="!(newPassword1Ctrl.hasError('error') && newPassword1Ctrl.touched)">{{ newPassword1Ctrl.errors?.error }}</ion-item>

      <ion-item>
        <ion-input formControlName="newPassword2"  type="password" placeholder="Re-enter password"></ion-input>
      </ion-item>
      <ion-item class="error-box" [hidden]="!(newPassword2Ctrl.hasError('error') && newPassword2Ctrl.touched)">{{ newPassword2Ctrl.errors?.error }}</ion-item>
      
      <ion-item>
        <button ion-button type="submit" (click)="createAccount()" color="primary"><ion-icon name="checkmark-circle"></ion-icon></button>
        <button ion-button (click)="makeVisible('menu')" color="danger"><ion-icon name="close-circle"></ion-icon></button>
      </ion-item>
    </form>
    <ion-item color="danger" [hidden]="!errorMessage">{{ errorMessage }}</ion-item>
    </ion-card-content>
  </ion-card>
</ion-content>
